@page "/Scanner"
@using System.Text.Json
@using Microsoft.AspNetCore.Components.Forms
@inject IJSRuntime JS

<InputFile OnChange="ReadFile" />

@if (!string.IsNullOrEmpty(jsonContent))
{
    <pre>@jsonContent</pre>
}

@code {
    string jsonContent = "";

    private async Task ReadFile(InputFileChangeEventArgs e)
    {
        var file = e.File;
        using var stream = file.OpenReadStream();
        using var reader = new StreamReader(stream);
        jsonContent = await reader.ReadToEndAsync();

        await JS.InvokeVoidAsync("console.log", $"JSON: {jsonContent}");
    }
}
